loki:
  enabled: true
  deploymentMode: StatefulSet
  persistence:
    enabled: true
    accessModes:
      - ReadWriteOnce
    size: 10Gi
promtail:
  enabled: true
  tolerations:
    - key: node-role.kubernetes.io/control-plane
      operator: Exists
      effect: NoSchedule
  extraVolumes:
    - name: varlog
      hostPath:
        path: /var/log
  extraVolumeMounts:
    - name: varlog
      mountPath: /var/log
      readOnly: true
  config:
    snippets:
      pipelineStages:
        - cri: {}
        - regex:
            expression: '=>\s*(?P<scope>.*)$'
        - replace:
            expression: ','
            replace: ' '
            source: scope
        - logfmt:
            source: scope
        - labels:
            TaskId:
            TraceId:
            SpanId: